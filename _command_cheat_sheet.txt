salloc --reservation=gpu-16_gpu-21_reservation --exclusive --mem=0 --nodelist=gpu-16
salloc --reservation=gpu-16_gpu-21_reservation --exclusive --mem=0 --nodelist=gpu-21

# 请求 2 个节点，每个节点 8 个 GPU，通过 Slurm
salloc --exclusive --mem=0 --gres=gpu:8 --reservation=gpu-16_gpu-21_reservation -N 2

torchrun --nnodes=2 --nproc_per_node=8 --rdzv_id=100 --rdzv_backend=c10d --rdzv_endpoint=gpu-16:29400 train_biomassters.py --train_fraction 1

podman run -it --privileged --network=host --ipc=host -v $HOME/code:/workdir -v /shareddata:/shareddata -v /shared:/shared --workdir /workdir docker://rocm/pytorch:latest bash

source /workdir/pangaea_env/bin/activate

podman run -it --privileged --network=host --ipc=host \
  -v $HOME/code:/workdir \
  -v /shareddata:/shareddata \
  -v /shared:/shared \
  -v $HOME/.local/podman-python-packages:/root/.local \
  --workdir /workdir \
  docker://rocm/pytorch:latest bash


# Pangaea Env
podman run -it --privileged --network=host --ipc=host \
  -v $HOME/code:/workdir \
  -v /shareddata:/shareddata \
  -v /shared:/shared \
  pangaea-rocm:latest bash